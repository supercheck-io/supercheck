---
title: Variables
description: Store configuration and secrets securely
icon: Variable
---

Variables let you store configuration values and sensitive credentials that your tests can access at runtime. Use variables for URLs, timeouts, and settings. Use secrets for API keys, passwords, and tokens that need encryption.

![Variables List](/screenshots/variables-list.png)

## Variables vs Secrets

<Tabs items={['Variables', 'Secrets']}>
<Tab value="Variables">

- **Storage:** Plain text
- **Visibility:** Shown in UI
- **Logging:** Logged normally
- **Use For:** URLs, timeouts, feature flags

</Tab>
<Tab value="Secrets">

- **Storage:** AES-128-GCM encrypted
- **Visibility:** Masked with `***`
- **Logging:** Auto-redacted as `[SECRET]`
- **Use For:** API keys, passwords, tokens

</Tab>
</Tabs>

## Creating Variables

<Tabs items={['Add Variable', 'Add Secret']}>
<Tab value="Add Variable">

1. Go to your project's **Variables** page
2. Click **Add Variable**
3. Enter a **key** (e.g., `BASE_URL`)
4. Enter the **value** (e.g., `https://staging.example.com`)
5. Optionally add a **description** for your team
6. Click **Save**

![Add Variable](/screenshots/add-variable.png)

</Tab>
<Tab value="Add Secret">

1. Go to your project's **Variables** page
2. Click **Add Variable**
3. Enter a **key** (e.g., `API_KEY`)
4. Enter the **value**
5. Check the **Secret** checkbox
6. Click **Save**

![Add Secret](/screenshots/add-secret.png)

<Callout type="info">
Once saved, secret values cannot be viewed in the UI. You can only update or delete them.
</Callout>

</Tab>
</Tabs>

## Using Variables in Tests

Access variables and secrets in your test code using the built-in functions:

<Tabs items={['getVariable()', 'getSecret()']}>
<Tab value="getVariable()">

Use for non-sensitive configuration:

```javascript
/**
 * Variables store plain-text configuration values.
 * Use getVariable() to retrieve them in your tests.
 */

// Basic usage
const baseUrl = getVariable('BASE_URL');
const timeout = getVariable('TIMEOUT');

// Navigate using variable
await page.goto(baseUrl + '/login');
```

</Tab>
<Tab value="getSecret()">

Use for sensitive credentials. **Pass directly to Playwright APIs** — no `.toString()` needed:

```javascript
/**
 * Secrets are encrypted and protected from accidental logging.
 * Pass them directly to Playwright APIs — they work seamlessly.
 */

// Form login — pass secret directly
const password = getSecret('TEST_PASSWORD');
await page.fill('#password', password);

// API authentication — use valueOf() for actual value in template literals
const apiKey = getSecret('API_KEY');
await page.setExtraHTTPHeaders({
  'Authorization': `Bearer ${apiKey.valueOf()}`
});

// Database connection — use { type: 'string' } when raw string is needed
const dbPassword = getSecret('DB_PASSWORD', { type: 'string' });
```

<Callout type="info">
Secrets are protected from accidental exposure in `console.log()`, template literals, and `JSON.stringify()`. They show `[SECRET]` instead of the actual value. Use `.valueOf()` or `{ type: 'string' }` when you need the raw value.
</Callout>

</Tab>
</Tabs>

### Secret Protection

Secrets are automatically protected from accidental exposure:

```javascript
/**
 * Secret values are masked in logs and console output.
 * No .toString() needed — pass directly to Playwright APIs.
 */

// These all show [SECRET] instead of the actual value
console.log(getSecret('API_KEY'));           // "[SECRET]"
console.log(`Key: ${getSecret('API_KEY')}`); // "Key: [SECRET]"
JSON.stringify({ key: getSecret('API_KEY') }); // {"key":"[SECRET]"}

// Use valueOf() to get the actual value when needed
const actualKey = getSecret('API_KEY').valueOf();

// Or pass directly to Playwright — it extracts the value automatically
await page.fill('#api-key', getSecret('API_KEY'));
```

**Secrets work normally in:**
- Playwright actions (`page.fill()`, `page.click()`)
- HTTP headers and request bodies
- URL parameters
- Comparisons and conditionals

## Common Patterns

<Tabs items={['Environment-Based', 'API Testing', 'Database Testing', 'Feature Flags', 'k6 Performance']}>
<Tab value="Environment-Based">

```javascript
/**
 * Load environment-specific configuration.
 * Store different URLs for staging vs production.
 */
const env = getVariable('ENVIRONMENT'); // 'staging' or 'production'
const baseUrl = getVariable(`${env.toUpperCase()}_URL`);

await page.goto(baseUrl);
```

</Tab>
<Tab value="API Testing">

```javascript
/**
 * Authenticated API request using Playwright's request context.
 * @see https://playwright.dev/docs/api-testing
 */
const apiUrl = getVariable('API_URL');
const apiToken = getSecret('API_TOKEN');
const apiKey = getSecret('API_KEY');
const apiTokenValue = apiToken.valueOf();
const apiKeyValue = apiKey.valueOf();

const response = await request.get(apiUrl + '/users', {
  headers: {
    'Authorization': `Bearer ${apiTokenValue}`,
    'X-API-Key': apiKeyValue
  }
});
```

</Tab>
<Tab value="Database Testing">

```javascript
/**
 * PostgreSQL database connection with secure credentials.
 * @requires pg - PostgreSQL client for Node.js
 */
import { Pool } from 'pg';

const pool = new Pool({
  host: getVariable('DB_HOST'),
  port: parseInt(getVariable('DB_PORT')),
  database: getVariable('DB_NAME'),
  user: getVariable('DB_USER'),
  password: getSecret('DB_PASSWORD', { type: 'string' })
});
```

</Tab>
<Tab value="Feature Flags">

```javascript
/**
 * Conditional test logic based on feature flags.
 * Useful for testing different UI versions.
 */
const featureEnabled = getVariable('ENABLE_NEW_CHECKOUT') === 'true';

if (featureEnabled) {
  await page.click('[data-testid="new-checkout"]');
} else {
  await page.click('[data-testid="classic-checkout"]');
}
```

</Tab>
<Tab value="k6 Performance">

```javascript
/**
 * Using variables in k6 load tests.
 * Variables are injected at runtime.
 * @see https://grafana.com/docs/k6/latest/using-k6/http-requests/
 */
import http from 'k6/http';

export default function () {
  const baseUrl = getVariable('API_URL');
  const apiKey = getSecret('API_KEY', { type: 'string' });
  
  http.get(`${baseUrl}/protected`, {
    headers: { Authorization: `Bearer ${apiKey}` }
  });
}
```

</Tab>
</Tabs>

## Variable Naming Conventions

Use clear, consistent naming for your variables:

| Pattern | Example | Use For |
|---------|---------|---------|
| `SCREAMING_SNAKE_CASE` | `BASE_URL`, `API_KEY` | Standard convention |
| `ENV_SPECIFIC` | `STAGING_URL`, `PROD_API_KEY` | Environment-specific values |
| `SERVICE_NAME` | `STRIPE_API_KEY`, `SENDGRID_KEY` | Third-party service credentials |

**Recommended variable names:**

| Variable | Description |
|----------|-------------|
| `BASE_URL` | Application base URL |
| `API_URL` | API endpoint base URL |
| `TIMEOUT` | Default timeout in milliseconds |
| `TEST_USER_EMAIL` | Test account email |
| `TEST_USER_PASSWORD` | Test account password (secret) |
| `API_KEY` | API authentication key (secret) |
| `DB_CONNECTION_STRING` | Database connection (secret) |

## Security Features

<Tabs items={['Encryption', 'Access Control', 'Audit Trail']}>
<Tab value="Encryption">

- Secrets are encrypted using **AES-128-GCM** with authenticated encryption
- Encryption keys are derived per-project using HKDF-SHA256
- Values are encrypted at rest in the database

</Tab>
<Tab value="Access Control">

Variables follow your project's role-based permissions:

| Role | View | Create | Edit | Delete | View Secret Values |
|------|------|--------|------|--------|-------------------|
| **Owner** | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Admin** | ✅ | ✅ | ✅ | ✅ | ✅ |
| **Editor** | ✅ | ✅ | ✅ | ❌ | ✅ |
| **Viewer** | ✅ | ❌ | ❌ | ❌ | ❌ |

</Tab>
<Tab value="Audit Trail">

All variable operations are logged:
- Who created, updated, or deleted variables
- When changes were made
- Variable keys (not secret values)

</Tab>
</Tabs>
